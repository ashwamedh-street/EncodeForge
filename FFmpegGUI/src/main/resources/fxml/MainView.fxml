<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" styleClass="root-pane">
    
    <!-- Top: Menu Bar and Toolbar -->
    <top>
        <VBox spacing="0">
            <!-- Menu Bar -->
            <MenuBar styleClass="main-menu-bar">
                <Menu text="File">
                    <MenuItem text="Add Files..." onAction="#handleAddFiles"/>
                    <MenuItem text="Add Folder..." onAction="#handleAddFolder"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="Exit" onAction="#handleExit"/>
                </Menu>
                <Menu text="Edit">
                    <MenuItem text="Settings..." onAction="#handleSettings"/>
                </Menu>
                <Menu text="Tools">
                    <MenuItem text="Rename Files..." onAction="#handleBatchRename"/>
                    <MenuItem text="Check FFmpeg..." onAction="#handleCheckFFmpeg"/>
                    <MenuItem text="Download FFmpeg..." onAction="#handleDownloadFFmpeg"/>
                </Menu>
                <Menu text="Help">
                    <MenuItem text="Documentation" onAction="#handleDocumentation"/>
                    <MenuItem text="About" onAction="#handleAbout"/>
                </Menu>
            </MenuBar>
            
            <!-- Toolbar -->
            <ToolBar styleClass="main-toolbar">
                <Label text="Mode:" styleClass="toolbar-label"/>
                <ComboBox fx:id="modeComboBox" onAction="#handleModeChange" styleClass="mode-combo">
                    <items>
                        <FXCollections fx:factory="observableArrayList">
                            <String fx:value="ðŸŽ¬ Encoder"/>
                            <String fx:value="ðŸ’¬ Subtitle"/>
                            <String fx:value="ðŸ“ Renamer"/>
                        </FXCollections>
                    </items>
                </ComboBox>
                <Separator orientation="VERTICAL"/>
                <Button fx:id="addFilesButton" text="âž• Add Files" onAction="#handleAddFiles" styleClass="toolbar-button"/>
                <Button fx:id="addFolderButton" text="ðŸ“ Add Folder" onAction="#handleAddFolder" styleClass="toolbar-button"/>
                <Separator orientation="VERTICAL"/>
                <Button fx:id="settingsButton" text="âš™ï¸ Settings" onAction="#handleSettings" styleClass="toolbar-button"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="statusLabel" text="Ready" styleClass="status-label"/>
            </ToolBar>
            
            <!-- Mode-Specific Quick Settings Panel -->
            <VBox fx:id="modeSpecificPanel" styleClass="mode-panel">
                <!-- Encoder Quick Settings -->
                <VBox fx:id="encoderQuickSettings" spacing="10" styleClass="quick-settings" managed="false" visible="false">
                    <padding>
                        <Insets top="15" right="15" bottom="15" left="15"/>
                    </padding>
                    
                    <!-- Row 1: Video Settings -->
                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <VBox spacing="4" styleClass="settings-group">
                            <Label text="Video Settings" styleClass="group-label"/>
                            <HBox spacing="10" alignment="CENTER_LEFT">
                                <Label text="Format:" styleClass="setting-label"/>
                                <ComboBox fx:id="quickFormatCombo" styleClass="quick-combo" prefWidth="100"/>
                                <Label text="Codec:" styleClass="setting-label"/>
                                <ComboBox fx:id="quickCodecCombo" styleClass="quick-combo" prefWidth="160"/>
                                <Label text="Quality:" styleClass="setting-label"/>
                                <ComboBox fx:id="quickQualityCombo" styleClass="quick-combo" prefWidth="160"/>
                                <Label text="Preset:" styleClass="setting-label"/>
                                <ComboBox fx:id="quickPresetCombo" styleClass="quick-combo" prefWidth="120"/>
                            </HBox>
                        </VBox>
                        
                        <Region HBox.hgrow="ALWAYS"/>
                        
                        <!-- Control Buttons -->
                        <HBox spacing="10">
                            <Button fx:id="startButton" text="â–¶ï¸ Start Encoding" onAction="#handleStartProcessing" styleClass="toolbar-button, primary-button" disable="true" prefWidth="160"/>
                            <Button fx:id="pauseButton" text="â¸ï¸ Pause" onAction="#handlePause" styleClass="toolbar-button" disable="true" prefWidth="110"/>
                            <Button fx:id="stopButton" text="â¹ï¸ Stop" onAction="#handleStop" styleClass="toolbar-button" disable="true" prefWidth="110"/>
                        </HBox>
                    </HBox>
                    
                    <!-- Row 2: Processing Options -->
                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <VBox spacing="6" styleClass="settings-group">
                            <Label text="Processing Options" styleClass="group-label"/>
                            <HBox spacing="15">
                                <CheckBox fx:id="quickHwAccelCheck" text="Hardware Acceleration" styleClass="quick-check" selected="true"/>
                                <CheckBox fx:id="quickDownloadSubsCheck" text="Download Subtitles" styleClass="quick-check"/>
                                <CheckBox fx:id="quickRenameCheck" text="Rename Files" styleClass="quick-check"/>
                            </HBox>
                        </VBox>
                        
                        <Separator orientation="VERTICAL"/>
                        
                        <VBox spacing="4" styleClass="settings-group">
                            <Label text="Configure" styleClass="group-label"/>
                            <HBox spacing="10">
                                <Button fx:id="configSubtitlesButton" text="ðŸ’¬ Subtitles" onAction="#handleConfigureSubtitles" styleClass="small-button" prefWidth="110"/>
                                <Button fx:id="configRenamerButton" text="ðŸ“ Renamer" onAction="#handleConfigureRenamer" styleClass="small-button" prefWidth="110"/>
                            </HBox>
                        </VBox>
                    </HBox>
                </VBox>
                
                <!-- Subtitle Quick Settings -->
                <VBox fx:id="subtitleQuickSettings" spacing="10" styleClass="quick-settings" managed="false" visible="false">
                    <padding>
                        <Insets top="15" right="15" bottom="15" left="15"/>
                    </padding>
                    
                    <!-- Row 1: Mode and Language Selection -->
                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <VBox spacing="4" styleClass="settings-group">
                            <Label text="Mode" styleClass="group-label"/>
                            <ComboBox fx:id="quickSubProviderCombo" styleClass="quick-combo" prefWidth="250"/>
                        </VBox>
                        
                        <Separator orientation="VERTICAL"/>
                        
                        <VBox spacing="4" styleClass="settings-group">
                            <Label text="Languages (Select Multiple)" styleClass="group-label"/>
                            <HBox spacing="10" alignment="CENTER_LEFT">
                                <CheckBox fx:id="langEnglishCheck" text="English" selected="true"/>
                                <CheckBox fx:id="langSpanishCheck" text="Spanish"/>
                                <CheckBox fx:id="langFrenchCheck" text="French"/>
                                <CheckBox fx:id="langGermanCheck" text="German"/>
                                <CheckBox fx:id="langJapaneseCheck" text="Japanese"/>
                                <CheckBox fx:id="langChineseCheck" text="Chinese"/>
                                <CheckBox fx:id="langKoreanCheck" text="Korean"/>
                                <CheckBox fx:id="langArabicCheck" text="Arabic"/>
                            </HBox>
                        </VBox>
                        
                        <Region HBox.hgrow="ALWAYS"/>
                        
                        <!-- Control Buttons -->
                        <HBox spacing="10">
                            <Button fx:id="subtitleSearchButton" text="ðŸ” Search" onAction="#handleSearchSubtitles" styleClass="toolbar-button" prefWidth="110"/>
                            <Button fx:id="subtitleDownloadButton" text="â¬‡ï¸ Download" onAction="#handleDownloadSubtitles" styleClass="toolbar-button" prefWidth="120"/>
                            <Button fx:id="subtitleGenerateButton" text="ðŸŽ™ï¸ Generate" onAction="#handleGenerateAI" styleClass="toolbar-button, primary-button" prefWidth="120"/>
                        </HBox>
                    </HBox>
                    
                    <!-- Row 2: Provider Status and Selected Files -->
                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <VBox spacing="4" styleClass="settings-group">
                            <Label text="Providers" styleClass="group-label"/>
                            <HBox spacing="10">
                                <Button fx:id="whisperStatusButton" text="ðŸ¤– Whisper: Not Setup" onAction="#handleConfigureWhisper" styleClass="provider-status-button" prefWidth="180"/>
                                <Button fx:id="openSubsStatusButton" text="ðŸŒ OpenSubtitles: Not Setup" onAction="#handleConfigureOpenSubtitles" styleClass="provider-status-button" prefWidth="200"/>
                            </HBox>
                        </VBox>
                        
                        <Separator orientation="VERTICAL"/>
                        
                        <VBox spacing="4" styleClass="settings-group" HBox.hgrow="ALWAYS">
                            <Label text="Selected Files" styleClass="group-label"/>
                            <Label fx:id="subtitleSelectedFilesLabel" text="No files selected" styleClass="info-label"/>
                        </VBox>
                    </HBox>
                </VBox>
                
                <!-- Renamer Quick Settings -->
                <VBox fx:id="renamerQuickSettings" spacing="10" styleClass="quick-settings" managed="false" visible="false">
                    <padding>
                        <Insets top="15" right="15" bottom="15" left="15"/>
                    </padding>
                    
                    <!-- Row 1: Settings and Control Buttons -->
                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <VBox spacing="4" styleClass="settings-group">
                            <Label text="Settings" styleClass="group-label"/>
                            <HBox spacing="10" alignment="CENTER_LEFT">
                                <Label text="Provider:" styleClass="setting-label"/>
                                <ComboBox fx:id="quickRenameProviderCombo" styleClass="quick-combo" prefWidth="150"/>
                                <Label text="Type:" styleClass="setting-label"/>
                                <ComboBox fx:id="quickRenameTypeCombo" styleClass="quick-combo" prefWidth="140"/>
                                <Button text="ðŸ“ Format Pattern" onAction="#handleOpenFormatter" styleClass="small-button" prefWidth="160"/>
                            </HBox>
                        </VBox>
                        
                        <Region HBox.hgrow="ALWAYS"/>
                        
                        <!-- Control Buttons -->
                        <HBox spacing="10">
                            <Button fx:id="refreshMetadataButton" text="ðŸ”„ Refresh" onAction="#handleRefreshMetadata" styleClass="toolbar-button" prefWidth="110"/>
                            <Button fx:id="applyRenameButton" text="âœ… Apply Selected" onAction="#handleApplyRename" styleClass="toolbar-button, primary-button" prefWidth="160"/>
                        </HBox>
                    </HBox>
                    
                    <!-- Row 2: Provider Status and Selected Files -->
                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <VBox spacing="4" styleClass="settings-group">
                            <Label text="Providers" styleClass="group-label"/>
                            <HBox spacing="10">
                                <Button fx:id="tmdbStatusButton" text="ðŸŽ¬ TMDB: Not Setup" onAction="#handleConfigureTMDB" styleClass="provider-status-button" prefWidth="170"/>
                                <Button fx:id="tvdbStatusButton" text="ðŸ“º TVDB: Not Setup" onAction="#handleConfigureTVDB" styleClass="provider-status-button" prefWidth="170"/>
                                <Button fx:id="anilistStatusButton" text="ðŸŽŒ AniList: Available" onAction="#handleConfigureAniList" styleClass="provider-status-button" prefWidth="170"/>
                            </HBox>
                        </VBox>
                        
                        <Separator orientation="VERTICAL"/>
                        
                        <VBox spacing="4" styleClass="settings-group" HBox.hgrow="ALWAYS">
                            <Label text="Selected Files" styleClass="group-label"/>
                            <Label fx:id="renamerSelectedFilesLabel" text="No files selected" styleClass="info-label"/>
                        </VBox>
                    </HBox>
                </VBox>
            </VBox>
        </VBox>
    </top>
    
    <!-- Center: Main Content Area -->
    <center>
        <StackPane fx:id="mainContentStack">
            
            <!-- Encoder Mode Layout -->
            <SplitPane fx:id="encoderModeLayout" dividerPositions="0.60" orientation="HORIZONTAL" styleClass="main-split-pane" managed="true" visible="true">
                
                <!-- Left Panel: Queue and Progress -->
                <SplitPane fx:id="leftPanelSplit" dividerPositions="0.70" orientation="VERTICAL" styleClass="left-panel-split">
                
                <!-- File Queue -->
                <VBox spacing="0" styleClass="queue-section">
                    <HBox alignment="CENTER_LEFT" styleClass="section-header">
                        <Label text="ðŸ“‹ Queue" styleClass="section-title"/>
                        <Label text="(Drag to reorder)" styleClass="hint-label" style="-fx-padding: 0 0 0 8;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="queueCountLabel" text="0 files" styleClass="queue-count"/>
                        <Separator orientation="VERTICAL" style="-fx-padding: 0 10;"/>
                        <Button fx:id="removeSelectedButton" text="âž– Remove" onAction="#handleRemoveSelected" styleClass="toolbar-button" style="-fx-padding: 6 16;"/>
                        <Separator orientation="VERTICAL" style="-fx-padding: 0 8;"/>
                        <Button fx:id="clearQueueButton" text="ðŸ—‘ï¸ Clear All" onAction="#handleClearQueue" styleClass="toolbar-button" style="-fx-padding: 6 16;"/>
                        <padding>
                            <Insets top="10" right="15" bottom="10" left="15"/>
                        </padding>
                    </HBox>
                
                <TableView fx:id="queueTable" VBox.vgrow="ALWAYS" styleClass="queue-table, draggable-table">
                    <columns>
                        <TableColumn fx:id="statusIconColumn" text="" prefWidth="40" minWidth="40" maxWidth="40"/>
                        <TableColumn fx:id="fileNameColumn" text="File Name" prefWidth="300"/>
                        <TableColumn fx:id="outputFormatColumn" text="Output" prefWidth="80"/>
                        <TableColumn fx:id="progressColumn" text="Progress" prefWidth="120"/>
                        <TableColumn fx:id="sizeColumn" text="Size" prefWidth="80"/>
                        <TableColumn fx:id="speedColumn" text="Speed" prefWidth="80"/>
                        <TableColumn fx:id="etaColumn" text="ETA" prefWidth="80"/>
                    </columns>
                    <contextMenu>
                        <ContextMenu>
                            <items>
                                <MenuItem text="Remove" onAction="#handleRemoveSelected"/>
                                <MenuItem text="Move Up" onAction="#handleMoveUp"/>
                                <MenuItem text="Move Down" onAction="#handleMoveDown"/>
                                <SeparatorMenuItem/>
                                <MenuItem text="Open File Location" onAction="#handleOpenFileLocation"/>
                            </items>
                        </ContextMenu>
                    </contextMenu>
                </TableView>
            </VBox>
                
                <!-- Current Progress -->
                <VBox spacing="0" styleClass="progress-section">
                    <HBox alignment="CENTER_LEFT" styleClass="section-header">
                        <Label text="ðŸ“Š Current Progress" styleClass="section-title"/>
                        <padding>
                            <Insets top="10" right="15" bottom="10" left="15"/>
                        </padding>
                    </HBox>
                    
                    <VBox spacing="15" styleClass="progress-content">
                        <padding>
                            <Insets top="15" right="15" bottom="15" left="15"/>
                        </padding>
                        
                        <Label fx:id="currentFileLabel" text="No file processing" styleClass="current-file-label"/>
                        <ProgressBar fx:id="currentFileProgressBar" progress="0" maxWidth="Infinity" styleClass="large-progress"/>
                        
                        <HBox spacing="20">
                            <VBox spacing="5" HBox.hgrow="ALWAYS">
                                <Label text="Progress:" styleClass="info-title"/>
                                <Label fx:id="progressPercentLabel" text="0%" styleClass="info-value"/>
                            </VBox>
                            <VBox spacing="5" HBox.hgrow="ALWAYS">
                                <Label text="Speed:" styleClass="info-title"/>
                                <Label fx:id="speedLabel" text="-" styleClass="info-value"/>
                            </VBox>
                            <VBox spacing="5" HBox.hgrow="ALWAYS">
                                <Label text="Time Remaining:" styleClass="info-title"/>
                                <Label fx:id="etaLabel" text="-" styleClass="info-value"/>
                            </VBox>
                            <VBox spacing="5" HBox.hgrow="ALWAYS">
                                <Label text="Frame:" styleClass="info-title"/>
                                <Label fx:id="frameLabel" text="-" styleClass="info-value"/>
                            </VBox>
                        </HBox>
                    </VBox>
                </VBox>
            </SplitPane>
            
            <!-- Right Panel: File Info and Preview -->
            <TabPane fx:id="rightPanelTabs" tabClosingPolicy="UNAVAILABLE" styleClass="info-tab-pane">
                
                <!-- File Info Tab -->
                <Tab fx:id="fileInfoTab" text="â„¹ï¸ File Info" closable="false">
                    <ScrollPane fitToWidth="true" styleClass="info-scroll">
                        <VBox spacing="15" styleClass="tab-content">
                            <padding>
                                <Insets top="15" right="15" bottom="15" left="15"/>
                            </padding>
                            
                            <!-- File Details -->
                            <VBox spacing="10">
                                <Label text="File Details" styleClass="section-subtitle"/>
                                <Label fx:id="fileInfoLabel" text="Select a file to view details" styleClass="file-info-text" wrapText="true"/>
                            </VBox>
                            
                            <!-- Media Information -->
                            <VBox fx:id="mediaInfoSection" spacing="10" managed="false" visible="false">
                                <Label text="Media Information" styleClass="section-subtitle"/>
                                <VBox spacing="5">
                                    <Label text="Video Tracks:" styleClass="info-title"/>
                                    <ListView fx:id="videoTracksListView" prefHeight="100" styleClass="track-list"/>
                                </VBox>
                                <VBox spacing="5">
                                    <Label text="Audio Tracks:" styleClass="info-title"/>
                                    <ListView fx:id="audioTracksListView" prefHeight="100" styleClass="track-list"/>
                                </VBox>
                                <VBox spacing="5">
                                    <Label text="Subtitle Tracks:" styleClass="info-title"/>
                                    <ListView fx:id="subtitleTracksListView" prefHeight="100" styleClass="track-list"/>
                                </VBox>
                            </VBox>
                        </VBox>
                    </ScrollPane>
                </Tab>
                
                <!-- Logs Tab -->
                <Tab fx:id="logsTab" text="ðŸ“‹ Logs" closable="false">
                    <VBox spacing="10" styleClass="tab-content">
                        <padding>
                            <Insets top="10" right="10" bottom="10" left="10"/>
                        </padding>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Log Level:" styleClass="info-title"/>
                            <ComboBox fx:id="logLevelComboBox" styleClass="log-level-combo"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="Clear" onAction="#handleClearLogs" styleClass="small-button"/>
                            <Button text="Export" onAction="#handleExportLogs" styleClass="small-button"/>
                        </HBox>
                        
                        <TextArea fx:id="logTextArea" VBox.vgrow="ALWAYS" editable="false" wrapText="false" styleClass="log-area"/>
                    </VBox>
                </Tab>
                
                </TabPane>
            </SplitPane>
            <!-- End Encoder Mode Layout -->
            
            <!-- Subtitle Mode Layout -->
            <SplitPane fx:id="subtitleModeLayout" dividerPositions="0.75" orientation="HORIZONTAL" styleClass="main-split-pane" managed="false" visible="false">
                
                <!-- Main Content: Subtitle Preview -->
                <ScrollPane fitToWidth="true" styleClass="preview-scroll">
                    <VBox fx:id="subtitlePreviewContent" spacing="15" styleClass="preview-content">
                        <padding>
                            <Insets top="15" right="15" bottom="15" left="15"/>
                        </padding>
                        
                        <Label text="ðŸ’¬ Subtitle Preview" styleClass="preview-title"/>
                        
                        <!-- File Selector -->
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Current File:" styleClass="setting-label"/>
                            <ComboBox fx:id="subtitleFileCombo" styleClass="preview-combo" prefWidth="400" HBox.hgrow="ALWAYS"/>
                        </HBox>
                        
                        <Separator/>
                        
                        <!-- Subtitle Results -->
                        <SplitPane dividerPositions="0.4" VBox.vgrow="ALWAYS" styleClass="comparison-split">
                            <!-- Available Subtitles -->
                            <VBox spacing="10" styleClass="comparison-panel">
                                <Label text="Available Subtitles" styleClass="comparison-title"/>
                                <TableView fx:id="availableSubtitlesTable" VBox.vgrow="ALWAYS" styleClass="subtitle-table">
                                    <columns>
                                        <TableColumn text="âœ“" prefWidth="40"/>
                                        <TableColumn text="Language" prefWidth="120"/>
                                        <TableColumn text="Provider" prefWidth="120"/>
                                        <TableColumn text="Format" prefWidth="80"/>
                                        <TableColumn text="Rating" prefWidth="80"/>
                                    </columns>
                                </TableView>
                            </VBox>
                            
                            <!-- Subtitle Details/Preview -->
                            <VBox spacing="10" styleClass="comparison-panel">
                                <Label text="Subtitle Details" styleClass="comparison-title"/>
                                <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
                                    <VBox spacing="12" styleClass="subtitle-details">
                                        <padding>
                                            <Insets top="10" right="10" bottom="10" left="10"/>
                                        </padding>
                                        <Label fx:id="subtitleDetailsLabel" text="Select a subtitle to view details" wrapText="true" styleClass="details-text"/>
                                    </VBox>
                                </ScrollPane>
                            </VBox>
                        </SplitPane>
                        
                        <!-- Footer -->
                        <HBox spacing="15" alignment="CENTER_LEFT" styleClass="preview-footer">
                            <Label fx:id="subtitleStatsLabel" text="0 available | 0 languages" styleClass="stats-label"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <CheckBox fx:id="embedSubtitlesCheck" text="Embed subtitles in video" styleClass="preview-check"/>
                            <Button text="ðŸ’¾ Save Selected" onAction="#handleSaveSubtitles" styleClass="primary-button"/>
                        </HBox>
                    </VBox>
                </ScrollPane>
                
                <!-- Sidebar: Logs Only -->
                <TabPane tabClosingPolicy="UNAVAILABLE" styleClass="info-tab-pane">
                    <Tab text="ðŸ“‹ Logs" closable="false">
                        <VBox spacing="10" styleClass="tab-content">
                            <padding>
                                <Insets top="10" right="10" bottom="10" left="10"/>
                            </padding>
                            
                            <HBox spacing="10" alignment="CENTER_LEFT">
                                <Label text="Log Level:" styleClass="info-title"/>
                                <ComboBox fx:id="subtitleLogLevelCombo" styleClass="log-level-combo"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <Button text="Clear" onAction="#handleClearLogs" styleClass="small-button"/>
                                <Button text="Export" onAction="#handleExportLogs" styleClass="small-button"/>
                            </HBox>
                            
                            <TextArea fx:id="subtitleLogArea" VBox.vgrow="ALWAYS" editable="false" wrapText="false" styleClass="log-area"/>
                        </VBox>
                    </Tab>
                </TabPane>
            </SplitPane>
            <!-- End Subtitle Mode Layout -->
            
            <!-- Renamer Mode Layout -->
            <SplitPane fx:id="renamerModeLayout" dividerPositions="0.75" orientation="HORIZONTAL" styleClass="main-split-pane" managed="false" visible="false">
                
                <!-- Main Content: Rename Preview -->
                <ScrollPane fitToWidth="true" styleClass="preview-scroll">
                    <VBox fx:id="renamePreviewContent" spacing="15" styleClass="preview-content">
                        <padding>
                            <Insets top="15" right="15" bottom="15" left="15"/>
                        </padding>
                        
                        <Label text="ðŸ“ Rename Preview" styleClass="preview-title"/>
                        
                        <!-- Provider Selection -->
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Provider Comparison:" styleClass="setting-label"/>
                            <ComboBox fx:id="previewProviderCombo" styleClass="preview-combo" prefWidth="200"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Label fx:id="renameProgressLabel" text="" styleClass="info-label"/>
                        </HBox>
                        
                        <Separator/>
                        
                        <!-- File Comparison -->
                        <SplitPane dividerPositions="0.5" VBox.vgrow="ALWAYS" styleClass="comparison-split">
                            <!-- Original Names -->
                            <VBox spacing="10" styleClass="comparison-panel">
                                <Label text="Original Filenames" styleClass="comparison-title"/>
                                <ListView fx:id="originalNamesListView" VBox.vgrow="ALWAYS" styleClass="comparison-list"/>
                            </VBox>
                            
                            <!-- Suggested Names -->
                            <VBox spacing="10" styleClass="comparison-panel">
                                <HBox spacing="10" alignment="CENTER_LEFT">
                                    <Label text="Suggested Filenames" styleClass="comparison-title"/>
                                    <Label fx:id="activeProviderLabel" text="" styleClass="provider-badge"/>
                                </HBox>
                                <ListView fx:id="suggestedNamesListView" VBox.vgrow="ALWAYS" styleClass="comparison-list"/>
                            </VBox>
                        </SplitPane>
                        
                        <!-- Footer -->
                        <HBox spacing="15" alignment="CENTER_LEFT" styleClass="preview-footer">
                            <Label fx:id="renameStatsLabel" text="0 files | 0 changes" styleClass="stats-label"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <CheckBox fx:id="createBackupCheck" text="Create backup before renaming" selected="true" styleClass="preview-check"/>
                        </HBox>
                    </VBox>
                </ScrollPane>
                
                <!-- Sidebar: Logs Only -->
                <TabPane tabClosingPolicy="UNAVAILABLE" styleClass="info-tab-pane">
                    <Tab text="ðŸ“‹ Logs" closable="false">
                        <VBox spacing="10" styleClass="tab-content">
                            <padding>
                                <Insets top="10" right="10" bottom="10" left="10"/>
                            </padding>
                            
                            <HBox spacing="10" alignment="CENTER_LEFT">
                                <Label text="Log Level:" styleClass="info-title"/>
                                <ComboBox fx:id="renamerLogLevelCombo" styleClass="log-level-combo"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <Button text="Clear" onAction="#handleClearLogs" styleClass="small-button"/>
                                <Button text="Export" onAction="#handleExportLogs" styleClass="small-button"/>
                            </HBox>
                            
                            <TextArea fx:id="renamerLogArea" VBox.vgrow="ALWAYS" editable="false" wrapText="false" styleClass="log-area"/>
                        </VBox>
                    </Tab>
                </TabPane>
            </SplitPane>
            <!-- End Renamer Mode Layout -->
            
        </StackPane>
    </center>
    
</BorderPane>
