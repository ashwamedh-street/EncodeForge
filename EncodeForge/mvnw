#!/bin/sh
# Maven Wrapper for Unix systems

MAVEN_VERSION=3.9.6
MAVEN_HOME="$HOME/.m2/wrapper/maven-$MAVEN_VERSION"

if [ ! -f "$MAVEN_HOME/bin/mvn" ]; then
    echo "Downloading Maven $MAVEN_VERSION..."
    mkdir -p "$HOME/.m2/wrapper"
    
    if command -v curl >/dev/null 2>&1; then
        curl -L "https://archive.apache.org/dist/maven/maven-3/$MAVEN_VERSION/binaries/apache-maven-$MAVEN_VERSION-bin.zip" -o "$HOME/.m2/wrapper/maven.zip"
    elif command -v wget >/dev/null 2>&1; then
        wget "https://archive.apache.org/dist/maven/maven-3/$MAVEN_VERSION/binaries/apache-maven-$MAVEN_VERSION-bin.zip" -O "$HOME/.m2/wrapper/maven.zip"
    else
        echo "Error: Neither curl nor wget found. Please install one of them."
        exit 1
    fi
    
    if [ -f "$HOME/.m2/wrapper/maven.zip" ]; then
        cd "$HOME/.m2/wrapper"
        unzip maven.zip
        mv "apache-maven-$MAVEN_VERSION" "maven-$MAVEN_VERSION"
        rm maven.zip
        echo "Maven downloaded successfully!"
    else
        echo "Error: Failed to download Maven"
        exit 1
    fi
fi

exec "$MAVEN_HOME/bin/mvn" "$@"
