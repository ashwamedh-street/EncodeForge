<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.encodeforge.controller.WhisperSetupDialog"
            prefWidth="700" prefHeight="500" styleClass="dialog-container">
    
    <!-- Top: Header -->
    <top>
        <VBox styleClass="dialog-header" BorderPane.alignment="CENTER">
            <padding>
                <Insets top="20" right="20" bottom="10" left="20"/>
            </padding>
            <Label fx:id="titleLabel" text="Setup AI Subtitle Generation" styleClass="dialog-title">
                <font>
                    <Font name="System Bold" size="22"/>
                </font>
            </Label>
            <Label fx:id="subtitleLabel" text="Install Whisper AI for automatic subtitle generation" styleClass="dialog-subtitle">
                <font>
                    <Font size="13"/>
                </font>
            </Label>
        </VBox>
    </top>
    
    <!-- Center: Pages -->
    <center>
        <StackPane fx:id="pagesContainer" BorderPane.alignment="CENTER">
            <padding>
                <Insets top="10" right="20" bottom="10" left="20"/>
            </padding>
            
            <!-- Page 1: Welcome -->
            <VBox fx:id="page1" spacing="15" visible="true">
                <Label text="Welcome to AI Subtitle Generation" styleClass="page-title">
                    <font>
                        <Font name="System Bold" size="16"/>
                    </font>
                </Label>
                
                <Text wrappingWidth="640" text="Whisper AI is a state-of-the-art speech recognition system that can automatically generate subtitles for your videos in multiple languages."/>
                
                <VBox spacing="8" styleClass="info-box">
                    <padding>
                        <Insets top="10" right="10" bottom="10" left="10"/>
                    </padding>
                    <Label text="Features:" styleClass="section-title">
                        <font>
                            <Font name="System Bold" size="13"/>
                        </font>
                    </Label>
                    <Label text="• Automatic speech recognition in 90+ languages"/>
                    <Label text="• Multiple model sizes (from 75 MB to 2.9 GB)"/>
                    <Label text="• High accuracy for clear audio"/>
                    <Label text="• Works completely offline"/>
                </VBox>
                
                <VBox spacing="8" styleClass="warning-box">
                    <padding>
                        <Insets top="10" right="10" bottom="10" left="10"/>
                    </padding>
                    <Label text="Requirements:" styleClass="section-title">
                        <font>
                            <Font name="System Bold" size="13"/>
                        </font>
                    </Label>
                    <Label text="• Disk space: 500 MB - 3 GB (depending on model)"/>
                    <Label text="• RAM: 4-8 GB recommended"/>
                    <Label text="• First-time setup: 5-15 minutes"/>
                </VBox>
            </VBox>
            
            <!-- Page 2: Model Selection -->
            <VBox fx:id="page2" spacing="15" visible="false">
                <Label text="Choose Whisper Model" styleClass="page-title">
                    <font>
                        <Font name="System Bold" size="16"/>
                    </font>
                </Label>
                
                <Text wrappingWidth="640" text="Select the model size that best fits your needs. Larger models are more accurate but require more disk space and processing time."/>
                
                <VBox spacing="10" fx:id="modelContainer">
                    <RadioButton fx:id="tinyModel" text="Tiny (75 MB) - Fastest, lowest accuracy" toggleGroup="$modelGroup"/>
                    <RadioButton fx:id="baseModel" text="Base (142 MB) - Fast, decent accuracy" toggleGroup="$modelGroup"/>
                    <RadioButton fx:id="smallModel" text="Small (466 MB) - Good balance" toggleGroup="$modelGroup" selected="true"/>
                    <RadioButton fx:id="mediumModel" text="Medium (1.5 GB) - High accuracy, slower" toggleGroup="$modelGroup"/>
                    <RadioButton fx:id="largeModel" text="Large (2.9 GB) - Best accuracy, slowest" toggleGroup="$modelGroup"/>
                </VBox>
                
                <Label text="Recommended: Small or Medium for most users" styleClass="hint-label">
                    <font>
                        <Font size="11" name="System Italic"/>
                    </font>
                </Label>
            </VBox>
            
            <!-- Page 3: Installation Progress -->
            <VBox fx:id="page3" spacing="15" visible="false">
                <Label text="Installing Whisper AI" styleClass="page-title">
                    <font>
                        <Font name="System Bold" size="16"/>
                    </font>
                </Label>
                
                <Label fx:id="installStatusLabel" text="Preparing installation..." wrapText="true"/>
                
                <ProgressBar fx:id="installProgressBar" progress="0" prefWidth="Infinity" prefHeight="30"/>
                
                <Label fx:id="installProgressLabel" text="0%">
                    <font>
                        <Font size="11"/>
                    </font>
                </Label>
                
                <TitledPane text="Installation Log" expanded="false" animated="true">
                    <ScrollPane fitToWidth="true" fitToHeight="true" prefHeight="200">
                        <TextArea fx:id="installLogArea" editable="false" wrapText="true" styleClass="log-area">
                            <font>
                                <Font family="Monospaced" size="10"/>
                            </font>
                        </TextArea>
                    </ScrollPane>
                </TitledPane>
            </VBox>
            
            <!-- Page 4: Complete -->
            <VBox fx:id="page4" spacing="15" visible="false" alignment="CENTER">
                <Label text="✓ Setup Complete!" styleClass="success-title">
                    <font>
                        <Font name="System Bold" size="20"/>
                    </font>
                </Label>
                
                <Text wrappingWidth="640" textAlignment="CENTER" 
                      text="Whisper AI has been successfully installed! You can now generate subtitles automatically for your videos."/>
                
                <VBox spacing="8" styleClass="info-box">
                    <padding>
                        <Insets top="15" right="15" bottom="15" left="15"/>
                    </padding>
                    <Label text="Next Steps:" styleClass="section-title">
                        <font>
                            <Font name="System Bold" size="13"/>
                        </font>
                    </Label>
                    <Label text="1. Go to the Subtitles tab in the main window"/>
                    <Label text="2. Select a video file"/>
                    <Label text="3. Click 'Generate Subtitles' and choose your model"/>
                    <Label text="4. Wait for Whisper to process (may take several minutes)"/>
                </VBox>
            </VBox>
            
        </StackPane>
    </center>
    
    <!-- Bottom: Navigation Buttons -->
    <bottom>
        <HBox alignment="CENTER_RIGHT" spacing="10" styleClass="button-bar" BorderPane.alignment="CENTER">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>
            <Button fx:id="cancelButton" text="Cancel" onAction="#handleCancel" prefWidth="100"/>
            <Button fx:id="backButton" text="Back" onAction="#handleBack" prefWidth="100" disable="true"/>
            <Button fx:id="nextButton" text="Next" onAction="#handleNext" prefWidth="100" defaultButton="true"/>
            <Button fx:id="finishButton" text="Finish" onAction="#handleFinish" prefWidth="100" visible="false"/>
        </HBox>
    </bottom>
    
</BorderPane>

